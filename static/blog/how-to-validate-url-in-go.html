<!DOCTYPE html>
<html lang="en">
  <head>
    <title>How to validate a URL in Go (Golang) Example</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="title" content="How to validate a URL in Go (Golang) Example" />
    <meta name="keywords" content="golang, learning golang, golang tutorial, golang url validation, how to validate url in go, go validate url" />
    <meta name="description" content="How to validate a URL in Go (Golang) Example" />
    <meta itemprop="name" content="How to validate a URL in Go (Golang) Example">
    <meta itemprop="description" content="How to validate a URL in Go (Golang) Example">
    <meta itemprop="image" content="https://golang.cafe/s/img/cafe.jpg">
    <meta property="og:url" content="https://golang.cafe">
    <meta property="og:type" content="website">
    <meta property="og:title" content="How to validate a URL in Go (Golang) Example">
    <meta property="og:description" content="How to validate a URL in Go (Golang) Example">
    <meta property="og:image" content="https://golang.cafe/s/img/cafe.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How to validate a URL in Go (Golang) Example">
    <meta name="twitter:description" content="How to validate a URL in Go (Golang) Example">
    <meta name="twitter:image" content="https://golang.cafe/s/img/cafe.jpg">
    
    <meta name="twitter:site" content="@golangcafe"/>
    <style type="text/css">
      input,textarea,select,button,option,html,body{font-family:Menlo,"Courier New",monospace;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}input,textarea,select,button,option,html,body{font-family:Menlo,"Courier New",monospace;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}th{font-weight:600}td,th{border-bottom:1.08px solid #595959;overflow:auto;padding:14.85px 18px;text-align:left;vertical-align:top}thead th{border-bottom-width:2.16px;padding-bottom:6.3px}table{display:table;overflow-x:auto}input,textarea,select,button,option,html,body{font-family:Menlo,"Courier New",monospace;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}fieldset{display:flex;flex-direction:row;flex-wrap:wrap}fieldset legend{margin:18px 0}input,textarea,select,button{border-radius:3.6px;display:inline-block;padding:9.9px}input+label,input+input[type="checkbox"],input+input[type="radio"],textarea+label,textarea+input[type="checkbox"],textarea+input[type="radio"],select+label,select+input[type="checkbox"],select+input[type="radio"],button+label,button+input[type="checkbox"],button+input[type="radio"]{page-break-before:always}input,select,label{margin-right:3.6px}textarea{min-height:90px;min-width:360px}label{display:inline-block;margin-bottom:12.6px}label+*{page-break-before:always}label>input{margin-bottom:0}input[type="submit"],input[type="reset"],button{background:#f2f2f2;color:#191919;cursor:pointer;display:inline;margin-bottom:18px;margin-right:7.2px;padding:6.525px 23.4px;text-align:center}input[type="submit"]:hover,input[type="reset"]:hover,button:hover{background:#d9d9d9;color:#000}input[type="submit"][disabled],input[type="reset"][disabled],button[disabled]{background:#e6e5e5;color:#403f3f;cursor:not-allowed}input[type="submit"],button[type="submit"]{background:#000090;color:#fff}input[type="submit"]:hover,button[type="submit"]:hover{background:#0000c5;color:#ffffff}input,select,textarea{margin-bottom:18px}input[type="text"],input[type="password"],input[type="email"],input[type="url"],input[type="phone"],input[type="tel"],input[type="number"],input[type="datetime"],input[type="date"],input[type="month"],input[type="week"],input[type="color"],input[type="time"],input[type="search"],input[type="range"],input[type="file"],input[type="datetime-local"],select,textarea{border:1px solid #595959;padding:5.4px 6.3px}input[type="checkbox"],input[type="radio"]{flex-grow:0;height:29.7px;margin-left:0;margin-right:9px;vertical-align:middle}input[type="checkbox"]+label,input[type="radio"]+label{page-break-before:avoid}select[multiple]{min-width:270px}input,textarea,select,button,option,html,body{font-family:Menlo,"Courier New",monospace;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}kbd,samp,var,output{font-family:Menlo,Monaco,Consolas,"Courier New",monospace;font-size:14.4px}pre{border-left:1.8px solid #59c072;line-height:25.2px;overflow:auto;padding-left:18px}kbd{background:#daf1e0;border-radius:3.6px;color:#2a6f3b;display:inline-block;line-height:18px;padding:3.6px 6.3px 2.7px}kbd{background:#2a6f3b;color:#fff}mark{background:#ffc;padding:0 3.6px}input,textarea,select,button,option,html,body{font-family:Menlo,"Courier New",monospace;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}h1,h2,h3,h4,h5,h6{color:#000;margin-bottom:18px}h1{font-size:36px;font-weight:500;line-height:41.4px;margin-top:72px}h2{font-size:25.2px;font-weight:400;line-height:30.6px;margin-top:54px}h3{font-size:21.6px;line-height:27px;margin-top:36px}h4{font-size:18px;line-height:23.4px;margin-top:18px}h5{font-size:14.4px;font-weight:bold;line-height:21.6px;text-transform:uppercase}h6{color:#595959;font-size:14.4px;font-weight:bold;line-height:18px;text-transform:uppercase}input,textarea,select,button,option,html,body{font-family:Menlo,"Courier New",monospace;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}a{color:#000090;text-decoration:none}a:hover{text-decoration:underline}hr{border-bottom:1px solid #595959}figcaption,small{font-size:15.3px}figcaption{color:#595959}var,em,i{font-style:italic}dt,strong,b{font-weight:600}del,s{text-decoration:line-through}ins,u{text-decoration:underline}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}*{border:0;border-collapse:separate;border-spacing:0;box-sizing:border-box;margin:0;max-width:100%;outline:0;padding:0;vertical-align:baseline}html,body{width:100%}html{height:100%}body{color:#1a1919;}p,ul,ol,dl,blockquote,hr,pre,table,form,fieldset,figure,address{margin-bottom:29.7px}section{margin-left:auto;margin-right:auto;width:780px}article,header,footer{padding:43.2px}article{word-wrap: break-word;background:#fff;border:1px solid #d9d9d9;border-radius:7.2px}nav{text-align:center}nav ul{list-style:none;margin-left:0;text-align:center}nav ul li{display:inline-block;margin-left:9px;margin-right:9px;vertical-align:middle}nav ul li:last-child{margin-right:0}ol,ul{margin-left:31.5px}li dl,li ol,li ul{margin-bottom:0}dl{display:inline-block}dt{padding:0 18px}dd{padding:0 18px 4.5px}dd:last-of-type{border-bottom:1.08px solid #595959}dd+dt{border-top:1.08px solid #595959;padding-top:9px}blockquote{border-left:2.16px solid #595959;padding:4.5px 18px 4.5px 15.84px}blockquote footer{color:#595959;font-size:13.5px;margin:0}blockquote p{margin-bottom:0}img{height:auto;margin:0 auto}figure img{display:block}/*# sourceMappingURL=tacit-css-1.3.2.min.css.map */
      html{background-image:linear-gradient(45deg,hsla(0,0%,93.7%,.06275),hsla(0,0%,93.7%,.06275)),url(/s/img/dg.png);}input{-webkit-appearance: none;-moz-appearance: none;appearance: none;}
      #carbonads{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",Helvetica,Arial,sans-serif}#carbonads{display:inline;max-width:330px;background-color:#f9f9f9;box-shadow:0 1px 4px 1px hsla(0,0%,0%,.1)}#carbonads a{color:inherit;text-decoration:none}#carbonads a:hover{color:inherit}#carbonads span{position:relative;display:block;overflow:hidden}#carbonads .carbon-wrap{display:flex}.carbon-img{display:block;margin:0;line-height:1}.carbon-img img{display:block}.carbon-text{font-size:13px;padding:10px;line-height:1.5;text-align:left}.carbon-poweredby{display:block;padding:8px 10px;background:repeating-linear-gradient(-45deg,transparent,transparent 5px,hsla(0,0%,0%,.025) 5px,hsla(0,0%,0%,.025) 10px) hsla(203,11%,95%,.4);text-align:center;text-transform:uppercase;letter-spacing:.5px;font-weight:600;font-size:9px;line-height:1}
        .menu-header{width: 100%;background: #000090; color: white;margin:0 auto;padding:0;}.menu-header a {color: white;}
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/themes/prism.min.css" rel="stylesheet" />
  </head>
  <body>
    <header style="padding:0;">
      <nav class="menu-header">
        <small>
                <a href="/">Jobs</a> &bull;
                <a href="/Golang-Developer-Salary-Remote">Insights</a> &bull;
                <a href="/slack">Slack</a> &bull;
                <a href="/shop">Store</a> &bull;
                <a href="/support">Support</a> &bull;
                <a href="/about">About</a>
          <br>
        </small>
      </nav>
    </header>
    <section style="margin:30px auto;">
      <article>
        <h1 class="code-line" data-line-start=0 data-line-end=1 ><a id="How_to_validate_a_URL_in_Go_Golang_0"></a>How to validate a URL in Go (Golang)</h1>
<p class="has-line-data" data-line-start="2" data-line-end="4">Validation is part of every programmer life, especially when working on backend services, validation must be done right. In this blog post we talk about how to properly validate a URL in Go (Golang).<br>
URL stands for Unique Resource Locator, and is a sub-type of URI (even though many people interchangeably use the two terms). A URL is a reference to a web resource, typically seen as a web address (eg <a href="https://golang.org/project/">https://golang.org/project/</a>)</p>
<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3J&placement=golangcafe" id="_carbonads_js"></script><br />
<p class="has-line-data" data-line-start="5" data-line-end="6">Below you can see the structure of a URL, which conforms with he structure of a URI</p>
<pre><code class="has-line-data" data-line-start="8" data-line-end="11">URI = scheme:[//authority]path[?query][#fragment]
authority = [userinfo@]host[:port]
</code></pre>
<h3 class="code-line" data-line-start=13 data-line-end=14 ><a id="How_do_you_validate_a_URL_in_Go_Golang_13"></a>How do you validate a URL in Go (Golang)?</h3>
<p class="has-line-data" data-line-start="15" data-line-end="16">I’ve always been impressed by the number of native packages in the Go standard library. Also this time we have a package that fulfils our needs. The <code>net/url</code> package <a href="https://golang.org/pkg/net/url/">https://golang.org/pkg/net/url/</a></p>
<p class="has-line-data" data-line-start="17" data-line-end="18">We can use <a href="https://golang.org/pkg/net/url/#ParseRequestURI"><code>url.ParseRequestURI</code></a> in order to validate our URL</p>
<pre><code class="language-go">func ParseRequestURI(rawurl string) (*URL, error)</code></pre>
</code></pre>
<p class="has-line-data" data-line-start="23" data-line-end="24">The behaviour is described below</p>
<blockquote>
<p class="has-line-data" data-line-start="25" data-line-end="26">ParseRequestURI parses rawurl into a URL structure. It assumes that rawurl was received in an HTTP request, so the rawurl is interpreted only as an absolute URI or an absolute path. The string rawurl is assumed not to have a #fragment suffix. (Web browsers strip #fragment before sending the URL to a web server.)</p>
</blockquote>
<h3 class="code-line" data-line-start=27 data-line-end=28 ><a id="Caveat_ParseRequestURI_vs_Parse_27"></a>Caveat: ParseRequestURI vs Parse</h3>
<p class="has-line-data" data-line-start="29" data-line-end="30">There is also another method that is supposed to be used for Parsing URL strings, but there are some caveats. It allows relative URLs making the validation a bit more loose. It’s <a href="https://golang.org/pkg/net/url/#Parse"><code>url.Parse</code></a></p>
<pre><code class="language-go">func Parse(rawurl string) (*URL, error)</code></pre>
</code></pre>
<p class="has-line-data" data-line-start="35" data-line-end="36">As described on the docs</p>
<blockquote>
<p class="has-line-data" data-line-start="37" data-line-end="39">Parse parses rawurl into a URL structure.<br>
The rawurl may be relative (a path, without a host) or absolute (starting with a scheme). Trying to parse a hostname and path without a scheme is invalid but may not necessarily return an error, due to parsing ambiguities.</p>
</blockquote>
<h3 class="code-line" data-line-start=40 data-line-end=41 ><a id="Parse_URL_Example_40"></a>Parse URL Example</h3>
<p class="has-line-data" data-line-start="42" data-line-end="43">Let’s see now an example on how to parse and validate a URL in Go using <strong>ParseRequestURI</strong></p>
<pre><code class="language-go">
package main

import (
  "log"
  "net/url"
)

func main() {
  u, err := url.ParseRequestURI("hi/there?")	
  log.Printf("hi/there?: err=%+v url=%+v\n", err, u)
  
  u, err = url.ParseRequestURI("http://golang.cafe/")	
  log.Printf("hi/there?: err=%+v url=%+v\n", err, u)
  
  u, err = url.ParseRequestURI("http://golang.org/index.html?#page1")	
  log.Printf("hi/there?: err=%+v url=%+v\n", err, u)
  
  u, err = url.ParseRequestURI("golang.org")	
  log.Printf("hi/there?: err=%+v url=%+v\n", err, u)
}
</code></pre>
<p class="has-line-data" data-line-start="46" data-line-end="47">Which outputs the following</p>
<pre><code class="language-bash">2009/11/10 23:00:00 hi/there?: err=parse hi/there?: invalid URI for request url=&lt;nil&gt;
2009/11/10 23:00:00 hi/there?: err=&lt;nil&gt; url=http://golang.cafe/
2009/11/10 23:00:00 hi/there?: err=&lt;nil&gt; url=http://golang.org/index.html?#page1
2009/11/10 23:00:00 hi/there?: err=parse golang.org: invalid URI for request url=&lt;nil&gt;
</code></pre>
        <br />
        <p>
          Golang Jobs Weekly
          <input type="email" name="job-email-subscription" id="job-email-subscription" class="email-subscribe-item" style="border: 1px solid #d9d9d9;margin-bottom:0;" placeholder="Your Email">
          <input type="submit" onclick="subscribe()" class="email-subscribe-item" value="Create Alert" style="margin-bottom: 0;"/>
      </p>
      </article>
  </section>
  <footer>
    <nav>
      <small>    
        <a href="/">Golang Jobs</a> &bull;
        <a href="/about">About Golang Cafe</a>
        <br>
      </small>
    </nav>
  </footer>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-go.min.js"></script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.js"></script>
  <script>
  function isEmail(email) {
      var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      return re.test(email);
  }
  var get = function(uri, cb) {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', uri, true);
      xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
      xhr.send();
      xhr.onreadystatechange = function() {
          if (xhr.readyState === 4) {
              cb(xhr.status === 200);
          }
      }
  };
  function subscribe() {
      var email = document.getElementById('job-email-subscription').value;
      var frequency = "Weekly";
      if (!isEmail(email)) {
          alert('Please enter a valid email address!');
          return;
      }
      get('/x/n/m/s?email='+encodeURIComponent(email)+'&frequency='+encodeURIComponent(frequency), function(success) {
          if (success) {
              alert('Thanks for subscribing. Please confirm your email before we can send any newsletter!');
              document.getElementById('job-email-subscription').value = '';
          } else {
              alert('Oops, there was an error with your subscription!');
          }
      });
  }
  </script>
  </body>
</html>

